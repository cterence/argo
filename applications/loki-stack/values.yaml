loki-stack:
  loki:
    enabled: true
    ingress:
      enabled: true
      ingressClassName: nginx
      annotations:
        external-dns.alpha.kubernetes.io/target: terence.cloud
        cert-manager.io/cluster-issuer: letsencrypt
        nginx.ingress.kubernetes.io/auth-url: "https://$host/oauth2/auth"
        nginx.ingress.kubernetes.io/auth-signin: "https://$host/oauth2/start?rd=$escaped_request_uri"
      hosts:
        - host: loki.terence.cloud
          paths:
            - /
      tls:
        - secretName: loki-tls
          hosts:
            - loki.terence.cloud

    persistence:
      enabled: true

    serviceMonitor:
      enabled: true
      prometheusRule:
        enabled: true

  promtail:
    enabled: true
    serviceMonitor:
      enabled: true
