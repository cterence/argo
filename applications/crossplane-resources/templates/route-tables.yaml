apiVersion: ec2.aws.crossplane.io/v1beta1
kind: RouteTable
metadata:
  name: private-{{ .Values.routeTables.name }}
spec:
  forProvider:
    region: {{ .Values.region }}
    associations:
      - subnetIdSelector:
          matchLabels:
            name: {{ .Values.subnets.private.name }}
    routes:
      - destinationCidrBlock: 0.0.0.0/0
        natGatewayIdSelector:
          matchLabels:
            name: {{ .Values.gateways.nat.name }}
    vpcIdSelector:
      matchLabels:
        name: {{ .Values.vpc.name }}
    tags:
      - key: Name
        value: private-{{ .Values.routeTables.name }}
  providerConfigRef:
    name: aws
---
apiVersion: ec2.aws.crossplane.io/v1beta1
kind: RouteTable
metadata:
  name: public-{{ .Values.routeTables.name }}
spec:
  forProvider:
    region: {{ .Values.region }}
    associations:
      - subnetIdSelector:
          matchLabels:
            name: {{ .Values.subnets.public.name }}
    routes:
      - destinationCidrBlock: 0.0.0.0/0
        gatewayIdSelector:
          matchLabels:
            name: {{ .Values.gateways.internet.name }}
    vpcIdSelector:
      matchLabels:
        name: {{ .Values.vpc.name }}
    tags:
      - key: Name
        value: public-{{ .Values.routeTables.name }}
  providerConfigRef:
    name: aws
